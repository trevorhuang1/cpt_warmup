---
toc: true
comments: false
layout: base
title: Stego Things
description: This is for stego things
type: hacks
courses: { compsci: {week: 0} }
---

# Stego things:

<input type="file" id="imageInput" accept="image/*">
<textarea id="messageInput" placeholder="Enter your message"></textarea>
<button onclick="encodeMessage()">Encode Message</button>
<canvas id="canvas"></canvas>

<script>
    function encodeMessage() {
            const imageInput = document.getElementById('imageInput');
            const messageInput = document.getElementById('messageInput');
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');

            const image = new Image();
            image.src = URL.createObjectURL(imageInput.files[0]);

            image.onload = function () {
                canvas.width = image.width;
                canvas.height = image.height;

                ctx.drawImage(image, 0, 0);

                const message = messageInput.value;
                const binaryMessage = stringToBinary(message);

                let binaryIndex = 0;

                for (let y = 0; y < image.height; y++) {
                    for (let x = 0; x < image.width; x++) {
                        const pixel = ctx.getImageData(x, y, 1, 1);
                        const rgba = pixel.data;

                        for (let i = 0; i < 3; i++) {
                            if (binaryIndex < binaryMessage.length) {
                                // Set the least significant bit of each RGB component to the message bit
                                rgba[i] = (rgba[i] & 0xFE) | parseInt(binaryMessage[binaryIndex], 2);
                                binaryIndex++;
                            }
                        }

                        ctx.putImageData(new ImageData(new Uint8ClampedArray(rgba), 1, 1), x, y);
                    }
                }
                window.binaryMessageLength = binaryMessage.length;
            };
        }

        function decodeMessage() {
            const encodedImageInput = document.getElementById('encodedImageInput');
            const decodedMessageTextarea = document.getElementById('decodedMessage');
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');

            const encodedImage = new Image();
            encodedImage.src = URL.createObjectURL(encodedImageInput.files[0]);

            encodedImage.onload = function () {
                canvas.width = encodedImage.width;
                canvas.height = encodedImage.height;

                ctx.drawImage(encodedImage, 0, 0);

                let binaryMessage = '';
                for (let y = 0; y < encodedImage.height; y++) {
                    for (let x = 0; x < encodedImage.width; x++) {
                        const pixel = ctx.getImageData(x, y, 1, 1).data;
                        if (binaryMessage.length < binaryMessageLength){
                            for (let i = 0; i < 3; i++) {
                                // Extract the least significant bit from each RGB component
                                binaryMessage += (pixel[i] & 1).toString();
                            }
                        }
                    }
                }

                const message = binaryToString(binaryMessage);
                decodedMessageTextarea.value = message;
            };
        }

        function stringToBinary(str) {
            const binary = [];
            for (let i = 0; i < str.length; i++) {
                const charCode = str.charCodeAt(i).toString(2);
                binary.push('0'.repeat(8 - charCode.length) + charCode);
            }
            return binary.join('');
        }

        function binaryToString(binary) {
            let str = '';
            for (let i = 0; i < binary.length; i += 8) {
                const byte = binary.substr(i, 8);
                str += String.fromCharCode(parseInt(byte, 2));
            }
            return str;
        }
</script>


# Stego Decode
<input type="file" id="encodedImageInput" accept="image/*">
<button onclick="decodeMessage()">Decode Message</button>
<textarea id="decodedMessage" placeholder="Decoded message will appear here"></textarea>




## Key Commits:
- https://github.com/trevorhuang1/cpt_warmup/commit/19b5222fb5bb63762c1bba148aca17f166b11b13

## Le Issuies:
- Figuring out how to do stego (u gotta take the least signficant bits of each pixel on the image in order to encrypt message)
- figuring out how to take input from images
- processing image data
- outputting images